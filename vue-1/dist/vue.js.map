{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer{\n  constructor(value){ // 需要对value属性重新定义\n    if(Array.isArray(value)){\n      \n    }else{\n      this.walk(value);\n    }\n  }\n  walk(data){\n    Object.keys(data).forEach((key)=>{\n      defineReactive(data, key, data[key]);\n    })\n  }\n}\n\nexport function defineReactive(data, key, value){\n  observe(value); // 对结果递归拦截\n  Object.defineProperty(data, key,{\n    get(){\n      return value;\n    },\n    set(newValue){\n      if(newValue == value) return;\n      observe(newValue);\n      value = newValue;\n    }\n  })\n}\n\n\n\nexport function observe(data){\n  if(typeof data !== 'object' || data == null){\n    return;\n  }\n  // 通过类来实现对数据的观测\n  return new Observer(data);\n}\n","import { observe } from \"./observe/index.js\";\n\n\nexport function initState(vm){\n  // 将所有数据定义在vm实例上，数据代理object.defineproperty\n  const opts = vm.$options;\n  if(opts.data){ // 数据的初始化\n    initData(vm);\n  }\n}\nfunction proxy(vm, source, key){\n  Object.defineProperty(vm, key,{\n    get(){\n      return vm[source][key]\n    },\n    set(newValue){\n      vm[source][key] = newValue;\n    }\n  })\n}\n\nfunction initData(vm){\n  // 数据劫持 object.defineproperty\n  let data = vm.$options.data;\n  data = vm._data  = typeof data === 'function'?data.call(vm):data;\n  for(let key in data){\n    proxy(vm, '_data', key);  //vm[_data][key]\n  }\n\n\n  observe(data); // 观测数据\n}\n\n\n","import {initState} from \"./state\";\n// import { mountComponent } from \"./lifecycle.js\";\n\n\nexport function initMixin(Vue){\n  Vue.prototype._init= function(options){\n    const vm = this;\n    vm.$options = options; // 实例上的属性\n    initState(vm); // 初始化状态\n    // if(vm.$options.el){\n      // vm.$mount(vm.options.el);\n    // }\n  }\n  // Vue.prototype.$mount = function(el){\n  //   el = document.querySelector(el);\n  //   const vm = this;\n  //   const options = vm.options;\n  //   vm.$options.el = el;\n  //   if(!options.render){\n  //     let template = options.template;\n  //     if(!template && el){\n  //       template = el.outerHTML;\n  //     }\n\n  //     const render = compileToFunctions(template);\n  //     options.render = render;\n  //   }\n  //   mounteComponent(vm, el);\n  // }\n}\n","import { initMixin } from \"./init\";\n// import { lifecycleMixin } from \"./lifecycle\";\n// import { renderMixin } from \"./render\";\n\n\nfunction Vue(options){\n   this._init(options); // 当用户new Vue时 就调用init方法进行vue的初始方法\n}\n// 可以拆分逻辑到不同的文件中 更利于代码维护 模块化的概念\n\ninitMixin(Vue); // 扩展初始化方法\n// lifecycleMixin(Vue); // 扩展_update方法\n// renderMixin(Vue); // 扩展_render方法\nexport default Vue\n"],"names":["Observer","value","Array","isArray","walk","data","Object","keys","forEach","key","defineReactive","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","initData","proxy","source","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}